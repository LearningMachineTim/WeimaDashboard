"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9283],{7035:(e,t,n)=>{n.d(t,{B:()=>s});var r=n(52423),o=(n(68404),n(42870)),i=n(16755),a=n(45916);function s(e){let{title:t,stepNumber:n,markdown:r,children:s}=e;const c=(0,i.wW)(l);return(0,a.jsxs)("div",{className:c.box,children:[void 0!==n&&(0,a.jsx)("div",{className:c.stepNumber,children:n}),(0,a.jsxs)("div",{className:c.boxInner,children:[t&&(0,a.jsx)("div",{className:c.header,children:(0,a.jsx)("span",{children:t})}),(0,a.jsxs)("div",{className:c.body,children:[r&&(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,o.a)(r)}}),s]})]})]})}const l=e=>({box:(0,r.css)({background:e.colors.background.secondary,padding:e.spacing(1),borderRadius:e.shape.borderRadius(),position:"relative"}),boxInner:(0,r.css)({marginLeft:e.spacing(4)}),stepNumber:(0,r.css)({fontWeight:e.typography.fontWeightMedium,background:e.colors.secondary.main,width:"20px",height:"20px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:e.typography.bodySmall.fontSize}),header:(0,r.css)({paddingBottom:e.spacing(.5),display:"flex",alignItems:"center",fontFamily:e.typography.fontFamilyMonospace}),body:(0,r.css)({color:e.colors.text.secondary,"p:last-child":{margin:0},a:{color:e.colors.text.link,textDecoration:"underline"}})})},14529:(e,t,n)=>{n.d(t,{P:()=>lt});var r=n(52423),o=n(68404),i=n(19677),a=n(62124),s=n(36345),l=n(68522),c=n(16755),d=n(43446),u=n(8006),p=n(21888),f=n(99500),m=n(70917),h=n(19225),g=n(14883),v=n(97394);function y(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function x(e){return e instanceof y(e).Element||e instanceof Element}function b(e){return e instanceof y(e).HTMLElement||e instanceof HTMLElement}function w(e){return"undefined"!=typeof ShadowRoot&&(e instanceof y(e).ShadowRoot||e instanceof ShadowRoot)}var j=Math.max,O=Math.min,k=Math.round;function E(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,o=1;if(b(e)&&t){var i=e.offsetHeight,a=e.offsetWidth;a>0&&(r=k(n.width)/a||1),i>0&&(o=k(n.height)/i||1)}return{width:n.width/r,height:n.height/o,top:n.top/o,right:n.right/r,bottom:n.bottom/o,left:n.left/r,x:n.left/r,y:n.top/o}}function C(e){var t=y(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function S(e){return e?(e.nodeName||"").toLowerCase():null}function L(e){return((x(e)?e.ownerDocument:e.document)||window.document).documentElement}function R(e){return E(L(e)).left+C(e).scrollLeft}function N(e){return y(e).getComputedStyle(e)}function M(e){var t=N(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function B(e,t,n){void 0===n&&(n=!1);var r,o,i=b(t),a=b(t)&&function(e){var t=e.getBoundingClientRect(),n=k(t.width)/e.offsetWidth||1,r=k(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=L(t),l=E(e,a),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(i||!i&&!n)&&(("body"!==S(t)||M(s))&&(c=(r=t)!==y(r)&&b(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:C(r)),b(t)?((d=E(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):s&&(d.x=R(s))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function D(e){var t=E(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function H(e){return"html"===S(e)?e:e.assignedSlot||e.parentNode||(w(e)?e.host:null)||L(e)}function z(e){return["html","body","#document"].indexOf(S(e))>=0?e.ownerDocument.body:b(e)&&M(e)?e:z(H(e))}function A(e,t){var n;void 0===t&&(t=[]);var r=z(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),i=y(r),a=o?[i].concat(i.visualViewport||[],M(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(A(H(a)))}function P(e){return["table","td","th"].indexOf(S(e))>=0}function W(e){return b(e)&&"fixed"!==N(e).position?e.offsetParent:null}function T(e){for(var t=y(e),n=W(e);n&&P(n)&&"static"===N(n).position;)n=W(n);return n&&("html"===S(n)||"body"===S(n)&&"static"===N(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&b(e)&&"fixed"===N(e).position)return null;var n=H(e);for(w(n)&&(n=n.host);b(n)&&["html","body"].indexOf(S(n))<0;){var r=N(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var I="top",F="bottom",q="right",$="left",V="auto",Q=[I,F,q,$],_="start",Z="end",U="viewport",J="popper",X=Q.reduce((function(e,t){return e.concat([t+"-"+_,t+"-"+Z])}),[]),Y=[].concat(Q,[V]).reduce((function(e,t){return e.concat([t,t+"-"+_,t+"-"+Z])}),[]),K=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function G(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}var ee={placement:"bottom",modifiers:[],strategy:"absolute"};function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function ne(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,i=void 0===o?ee:o;return function(e,t,n){void 0===n&&(n=i);var o,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},ee,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:s,setOptions:function(n){var o="function"==typeof n?n(s.options):n;u(),s.options=Object.assign({},i,s.options,o),s.scrollParents={reference:x(e)?A(e):e.contextElement?A(e.contextElement):[],popper:A(t)};var a=function(e){var t=G(e);return K.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,s.options.modifiers)));return s.orderedModifiers=a.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var i=o({state:s,name:t,instance:d,options:r}),a=function(){};l.push(i||a)}})),d.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(te(t,n)){s.rects={reference:B(t,T(n),"fixed"===s.options.strategy),popper:D(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var o=s.orderedModifiers[r],i=o.fn,a=o.options,l=void 0===a?{}:a,u=o.name;"function"==typeof i&&(s=i({state:s,options:l,name:u,instance:d})||s)}else s.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(e){d.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(o())}))}))),a}),destroy:function(){u(),c=!0}};if(!te(e,t))return d;function u(){l.forEach((function(e){return e()})),l=[]}return d.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var re={passive:!0};function oe(e){return e.split("-")[0]}function ie(e){return e.split("-")[1]}function ae(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function se(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?oe(o):null,a=o?ie(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(i){case I:t={x:s,y:n.y-r.height};break;case F:t={x:s,y:n.y+n.height};break;case q:t={x:n.x+n.width,y:l};break;case $:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?ae(i):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case _:t[c]=t[c]-(n[d]/2-r[d]/2);break;case Z:t[c]=t[c]+(n[d]/2-r[d]/2)}}return t}var le={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ce(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,p=a.x,f=void 0===p?0:p,m=a.y,h=void 0===m?0:m,g="function"==typeof d?d({x:f,y:h}):{x:f,y:h};f=g.x,h=g.y;var v=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),b=$,w=I,j=window;if(c){var O=T(n),E="clientHeight",C="clientWidth";if(O===y(n)&&"static"!==N(O=L(n)).position&&"absolute"===s&&(E="scrollHeight",C="scrollWidth"),o===I||(o===$||o===q)&&i===Z)w=F,h-=(u&&O===j&&j.visualViewport?j.visualViewport.height:O[E])-r.height,h*=l?1:-1;if(o===$||(o===I||o===F)&&i===Z)b=q,f-=(u&&O===j&&j.visualViewport?j.visualViewport.width:O[C])-r.width,f*=l?1:-1}var S,R=Object.assign({position:s},c&&le),M=!0===d?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:k(t*r)/r||0,y:k(n*r)/r||0}}({x:f,y:h}):{x:f,y:h};return f=M.x,h=M.y,l?Object.assign({},R,((S={})[w]=x?"0":"",S[b]=v?"0":"",S.transform=(j.devicePixelRatio||1)<=1?"translate("+f+"px, "+h+"px)":"translate3d("+f+"px, "+h+"px, 0)",S)):Object.assign({},R,((t={})[w]=x?h+"px":"",t[b]=v?f+"px":"",t.transform="",t))}const de={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=Y.reduce((function(e,n){return e[n]=function(e,t,n){var r=oe(e),o=[$,I].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[$,q].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var ue={left:"right",right:"left",bottom:"top",top:"bottom"};function pe(e){return e.replace(/left|right|bottom|top/g,(function(e){return ue[e]}))}var fe={start:"end",end:"start"};function me(e){return e.replace(/start|end/g,(function(e){return fe[e]}))}function he(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&w(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ge(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ve(e,t){return t===U?ge(function(e){var t=y(e),n=L(e),r=t.visualViewport,o=n.clientWidth,i=n.clientHeight,a=0,s=0;return r&&(o=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:o,height:i,x:a+R(e),y:s}}(e)):x(t)?function(e){var t=E(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ge(function(e){var t,n=L(e),r=C(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=j(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=j(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+R(e),l=-r.scrollTop;return"rtl"===N(o||n).direction&&(s+=j(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}(L(e)))}function ye(e,t,n){var r="clippingParents"===t?function(e){var t=A(H(e)),n=["absolute","fixed"].indexOf(N(e).position)>=0&&b(e)?T(e):e;return x(n)?t.filter((function(e){return x(e)&&he(e,n)&&"body"!==S(e)})):[]}(e):[].concat(t),o=[].concat(r,[n]),i=o[0],a=o.reduce((function(t,n){var r=ve(e,n);return t.top=j(r.top,t.top),t.right=O(r.right,t.right),t.bottom=O(r.bottom,t.bottom),t.left=j(r.left,t.left),t}),ve(e,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function xe(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function be(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function we(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.boundary,a=void 0===i?"clippingParents":i,s=n.rootBoundary,l=void 0===s?U:s,c=n.elementContext,d=void 0===c?J:c,u=n.altBoundary,p=void 0!==u&&u,f=n.padding,m=void 0===f?0:f,h=xe("number"!=typeof m?m:be(m,Q)),g=d===J?"reference":J,v=e.rects.popper,y=e.elements[p?g:d],b=ye(x(y)?y:y.contextElement||L(e.elements.popper),a,l),w=E(e.elements.reference),j=se({reference:w,element:v,strategy:"absolute",placement:o}),O=ge(Object.assign({},v,j)),k=d===J?O:w,C={top:b.top-k.top+h.top,bottom:k.bottom-b.bottom+h.bottom,left:b.left-k.left+h.left,right:k.right-b.right+h.right},S=e.modifiersData.offset;if(d===J&&S){var R=S[o];Object.keys(C).forEach((function(e){var t=[q,F].indexOf(e)>=0?1:-1,n=[I,F].indexOf(e)>=0?"y":"x";C[e]+=R[n]*t}))}return C}function je(e,t,n){return j(e,O(t,n))}const Oe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,p=n.tether,f=void 0===p||p,m=n.tetherOffset,h=void 0===m?0:m,g=we(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=oe(t.placement),y=ie(t.placement),x=!y,b=ae(v),w="x"===b?"y":"x",k=t.modifiersData.popperOffsets,E=t.rects.reference,C=t.rects.popper,S="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,L="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(k){if(i){var M,B="y"===b?I:$,H="y"===b?F:q,z="y"===b?"height":"width",A=k[b],P=A+g[B],W=A-g[H],V=f?-C[z]/2:0,Q=y===_?E[z]:C[z],Z=y===_?-C[z]:-E[z],U=t.elements.arrow,J=f&&U?D(U):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Y=X[B],K=X[H],G=je(0,E[z],J[z]),ee=x?E[z]/2-V-G-Y-L.mainAxis:Q-G-Y-L.mainAxis,te=x?-E[z]/2+V+G+K+L.mainAxis:Z+G+K+L.mainAxis,ne=t.elements.arrow&&T(t.elements.arrow),re=ne?"y"===b?ne.clientTop||0:ne.clientLeft||0:0,se=null!=(M=null==R?void 0:R[b])?M:0,le=A+te-se,ce=je(f?O(P,A+ee-se-re):P,A,f?j(W,le):W);k[b]=ce,N[b]=ce-A}if(s){var de,ue="x"===b?I:$,pe="x"===b?F:q,fe=k[w],me="y"===w?"height":"width",he=fe+g[ue],ge=fe-g[pe],ve=-1!==[I,$].indexOf(v),ye=null!=(de=null==R?void 0:R[w])?de:0,xe=ve?he:fe-E[me]-C[me]-ye+L.altAxis,be=ve?fe+E[me]+C[me]-ye-L.altAxis:ge,Oe=f&&ve?function(e,t,n){var r=je(e,t,n);return r>n?n:r}(xe,fe,be):je(f?xe:he,fe,f?be:ge);k[w]=Oe,N[w]=Oe-fe}t.modifiersData[r]=N}},requiresIfExists:["offset"]};const ke={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=oe(n.placement),l=ae(s),c=[$,q].indexOf(s)>=0?"height":"width";if(i&&a){var d=function(e,t){return xe("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:be(e,Q))}(o.padding,n),u=D(i),p="y"===l?I:$,f="y"===l?F:q,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],h=a[l]-n.rects.reference[l],g=T(i),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=m/2-h/2,x=d[p],b=v-u[c]-d[f],w=v/2-u[c]/2+y,j=je(x,w,b),O=l;n.modifiersData[r]=((t={})[O]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&he(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ee(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ce(e){return[I,q,F,$].some((function(t){return e[t]>=0}))}var Se=ne({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,a=r.resize,s=void 0===a||a,l=y(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,re)})),s&&l.addEventListener("resize",n.update,re),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,re)})),s&&l.removeEventListener("resize",n.update,re)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=se({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,l=void 0===s||s,c={placement:oe(t.placement),variation:ie(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ce(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ce(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];b(o)&&S(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});b(r)&&S(r)&&(Object.assign(r.style,i),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},de,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,m=void 0===f||f,h=n.allowedAutoPlacements,g=t.options.placement,v=oe(g),y=l||(v===g||!m?[pe(g)]:function(e){if(oe(e)===V)return[];var t=pe(e);return[me(e),t,me(t)]}(g)),x=[g].concat(y).reduce((function(e,n){return e.concat(oe(n)===V?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Y:l,d=ie(r),u=d?s?X:X.filter((function(e){return ie(e)===d})):Q,p=u.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=u);var f=p.reduce((function(t,n){return t[n]=we(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[oe(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:h}):n)}),[]),b=t.rects.reference,w=t.rects.popper,j=new Map,O=!0,k=x[0],E=0;E<x.length;E++){var C=x[E],S=oe(C),L=ie(C)===_,R=[I,F].indexOf(S)>=0,N=R?"width":"height",M=we(t,{placement:C,boundary:d,rootBoundary:u,altBoundary:p,padding:c}),B=R?L?q:$:L?F:I;b[N]>w[N]&&(B=pe(B));var D=pe(B),H=[];if(i&&H.push(M[S]<=0),s&&H.push(M[B]<=0,M[D]<=0),H.every((function(e){return e}))){k=C,O=!1;break}j.set(C,H)}if(O)for(var z=function(e){var t=x.find((function(t){var n=j.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},A=m?3:1;A>0;A--){if("break"===z(A))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},Oe,ke,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=we(t,{elementContext:"reference"}),s=we(t,{altBoundary:!0}),l=Ee(a,r),c=Ee(s,o,i),d=Ce(l),u=Ce(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]}),Le=n(25413),Re=n.n(Le),Ne=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},Me="undefined"!=typeof window&&window.document&&window.document.createElement?o.useLayoutEffect:o.useEffect,Be=[];function De(e){var t=o.useRef(e);return t.current=e,o.useCallback((function(){return t.current}),[])}var He=function(){};function ze(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),function(){return{width:0,height:0,top:t,right:e,bottom:t,left:e,x:0,y:0,toJSON:function(){return null}}}}var Ae=["styles","attributes"],Pe={getBoundingClientRect:ze()},We={closeOnOutsideClick:!0,closeOnTriggerHidden:!1,defaultVisible:!1,delayHide:0,delayShow:0,followCursor:!1,interactive:!1,mutationObserverOptions:{attributes:!0,childList:!0,subtree:!0},offset:[0,6],trigger:"hover"};function Te(e,t){var n,r,i;void 0===e&&(e={}),void 0===t&&(t={});var a=Object.keys(We).reduce((function(e,t){var n;return(0,g.Z)({},e,((n={})[t]=void 0!==e[t]?e[t]:We[t],n))}),e),s=o.useMemo((function(){return[{name:"offset",options:{offset:a.offset}}]}),Array.isArray(a.offset)?a.offset:[]),l=(0,g.Z)({},t,{placement:t.placement||a.placement,modifiers:t.modifiers||s}),c=o.useState(null),d=c[0],u=c[1],p=o.useState(null),f=p[0],m=p[1],y=function(e){var t=e.initial,n=e.value,r=e.onChange,i=void 0===r?He:r;if(void 0===t&&void 0===n)throw new TypeError('Either "value" or "initial" variable must be set. Now both are undefined');var a=o.useState(t),s=a[0],l=a[1],c=De(s),d=o.useCallback((function(e){var t=c(),n="function"==typeof e?e(t):e;"function"==typeof n.persist&&n.persist(),l(n),"function"==typeof i&&i(n)}),[c,i]),u=void 0!==n;return[u?n:s,u?i:d]}({initial:a.defaultVisible,value:a.visible,onChange:a.onVisibleChange}),x=y[0],b=y[1],w=o.useRef();o.useEffect((function(){return function(){return clearTimeout(w.current)}}),[]);var j=function(e,t,n){void 0===n&&(n={});var r=o.useRef(null),i={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Be},a=o.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=a[0],l=a[1],c=o.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);v.flushSync((function(){l({styles:Ne(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:Ne(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),d=o.useMemo((function(){var e={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[c,{name:"applyStyles",enabled:!1}])};return Re()(r.current,e)?r.current||e:(r.current=e,e)}),[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,c]),u=o.useRef();return Me((function(){u.current&&u.current.setOptions(d)}),[d]),Me((function(){if(null!=e&&null!=t){var r=(n.createPopper||Se)(e,t,d);return u.current=r,function(){r.destroy(),u.current=null}}}),[e,t,n.createPopper]),{state:u.current?u.current.state:null,styles:s.styles,attributes:s.attributes,update:u.current?u.current.update:null,forceUpdate:u.current?u.current.forceUpdate:null}}(a.followCursor?Pe:d,f,l),O=j.styles,k=j.attributes,E=(0,h.Z)(j,Ae),C=E.update,S=De({visible:x,triggerRef:d,tooltipRef:f,finalConfig:a}),L=o.useCallback((function(e){return Array.isArray(a.trigger)?a.trigger.includes(e):a.trigger===e}),Array.isArray(a.trigger)?a.trigger:[a.trigger]),R=o.useCallback((function(){clearTimeout(w.current),w.current=window.setTimeout((function(){return b(!1)}),a.delayHide)}),[a.delayHide,b]),N=o.useCallback((function(){clearTimeout(w.current),w.current=window.setTimeout((function(){return b(!0)}),a.delayShow)}),[a.delayShow,b]),M=o.useCallback((function(){S().visible?R():N()}),[S,R,N]);o.useEffect((function(){if(S().finalConfig.closeOnOutsideClick){var e=function(e){var t,n=S(),r=n.tooltipRef,o=n.triggerRef,i=(null==e.composedPath||null==(t=e.composedPath())?void 0:t[0])||e.target;i instanceof Node&&(null==r||null==o||r.contains(i)||o.contains(i)||R())};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}}),[S,R]),o.useEffect((function(){if(null!=d&&L("click"))return d.addEventListener("click",M),function(){return d.removeEventListener("click",M)}}),[d,L,M]),o.useEffect((function(){if(null!=d&&L("double-click"))return d.addEventListener("dblclick",M),function(){return d.removeEventListener("dblclick",M)}}),[d,L,M]),o.useEffect((function(){if(null!=d&&L("right-click")){var e=function(e){e.preventDefault(),M()};return d.addEventListener("contextmenu",e),function(){return d.removeEventListener("contextmenu",e)}}}),[d,L,M]),o.useEffect((function(){if(null!=d&&L("focus"))return d.addEventListener("focus",N),d.addEventListener("blur",R),function(){d.removeEventListener("focus",N),d.removeEventListener("blur",R)}}),[d,L,N,R]),o.useEffect((function(){if(null!=d&&L("hover"))return d.addEventListener("mouseenter",N),d.addEventListener("mouseleave",R),function(){d.removeEventListener("mouseenter",N),d.removeEventListener("mouseleave",R)}}),[d,L,N,R]),o.useEffect((function(){if(null!=f&&L("hover")&&S().finalConfig.interactive)return f.addEventListener("mouseenter",N),f.addEventListener("mouseleave",R),function(){f.removeEventListener("mouseenter",N),f.removeEventListener("mouseleave",R)}}),[f,L,N,R,S]);var B=null==E||null==(n=E.state)||null==(r=n.modifiersData)||null==(i=r.hide)?void 0:i.isReferenceHidden;o.useEffect((function(){a.closeOnTriggerHidden&&B&&R()}),[a.closeOnTriggerHidden,R,B]),o.useEffect((function(){if(a.followCursor&&null!=d)return d.addEventListener("mousemove",e),function(){return d.removeEventListener("mousemove",e)};function e(e){var t=e.clientX,n=e.clientY;Pe.getBoundingClientRect=ze(t,n),null==C||C()}}),[a.followCursor,d,C]),o.useEffect((function(){if(null!=f&&null!=C&&null!=a.mutationObserverOptions){var e=new MutationObserver(C);return e.observe(f,a.mutationObserverOptions),function(){return e.disconnect()}}}),[a.mutationObserverOptions,f,C]);return(0,g.Z)({getArrowProps:function(e){return void 0===e&&(e={}),(0,g.Z)({},e,k.arrow,{style:(0,g.Z)({},e.style,O.arrow),"data-popper-arrow":!0})},getTooltipProps:function(e){return void 0===e&&(e={}),(0,g.Z)({},e,{style:(0,g.Z)({},e.style,O.popper)},k.popper,{"data-popper-interactive":a.interactive})},setTooltipRef:m,setTriggerRef:u,tooltipRef:f,triggerRef:d,visible:x},E)}var Ie,Fe=n(42870),qe=n(48717),$e=n(45916);const Ve=o.memo((e=>{let{def:t,operation:n}=e;const r=(0,c.wW)(Qe),[i,a]=(0,o.useState)(!1),{getTooltipProps:s,setTooltipRef:d,setTriggerRef:p,visible:f}=Te({placement:"top",visible:i,offset:[0,16],onVisibleChange:a,interactive:!0,trigger:["click"]});return(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)(u.zx,{title:"Click to show description",ref:p,icon:"info-circle",size:"sm",variant:"secondary",fill:"text"}),f&&(0,$e.jsx)(qe.h_,{children:(0,$e.jsxs)("div",Object.assign({ref:d},s(),{className:r.docBox,children:[(0,$e.jsxs)("div",{className:r.docBoxHeader,children:[(0,$e.jsx)("span",{children:t.renderer(n,t,"<expr>")}),Ie||(Ie=(0,$e.jsx)(l.FlexItem,{grow:1})),(0,$e.jsx)(u.zx,{icon:"times",onClick:()=>a(!1),fill:"text",variant:"secondary",title:"Remove operation"})]}),(0,$e.jsx)("div",{className:r.docBoxBody,dangerouslySetInnerHTML:{__html:_e(t,n)}})]}))})]})}));Ve.displayName="OperationDocs";const Qe=e=>({docBox:(0,r.css)({overflow:"hidden",background:e.colors.background.primary,border:`1px solid ${e.colors.border.strong}`,boxShadow:e.shadows.z3,maxWidth:"600px",padding:e.spacing(1),borderRadius:e.shape.borderRadius(),zIndex:e.zIndex.tooltip}),docBoxHeader:(0,r.css)({fontSize:e.typography.h5.fontSize,fontFamily:e.typography.fontFamilyMonospace,paddingBottom:e.spacing(1),display:"flex",alignItems:"center"}),docBoxBody:(0,r.css)({marginBottom:e.spacing(-1),color:e.colors.text.secondary}),signature:(0,r.css)({fontSize:e.typography.bodySmall.fontSize,fontFamily:e.typography.fontFamilyMonospace}),dropdown:(0,r.css)({opacity:0,color:e.colors.text.secondary})});function _e(e,t){var n;return(0,Fe.a)(e.explainHandler?e.explainHandler(t,e):null!==(n=e.documentation)&&void 0!==n?n:"no docs")}var Ze;const Ue=o.memo((e=>{var t;let{operation:n,def:r,index:i,onChange:a,onRemove:s,queryModeller:d,dragHandleProps:p}=e;const f=(0,c.wW)(Je),[h,g]=(0,o.useState)({}),v=()=>{if(h.isOpen)g(Object.assign({},h,{isOpen:!1}));else{const e=d.getAlternativeOperations(r.alternativesKey).map((e=>({label:e.name,value:e})));g({isOpen:!0,alternatives:e})}};return(0,$e.jsxs)("div",{className:f.header,children:[!h.isOpen&&(0,$e.jsxs)($e.Fragment,{children:[(0,$e.jsx)("div",Object.assign({},p,{children:null!==(t=r.name)&&void 0!==t?t:r.id})),Ze||(Ze=(0,$e.jsx)(l.FlexItem,{grow:1})),(0,$e.jsxs)("div",{className:`${f.operationHeaderButtons} operation-header-show-on-hover`,children:[(0,$e.jsx)(u.zx,{icon:"angle-down",size:"sm",onClick:v,fill:"text",variant:"secondary",title:"Click to view alternative operations"}),(0,$e.jsx)(Ve,{def:r,operation:n}),(0,$e.jsx)(u.zx,{icon:"times",size:"sm",onClick:()=>s(i),fill:"text",variant:"secondary",title:"Remove operation"})]})]}),h.isOpen&&(0,$e.jsx)("div",{className:f.selectWrapper,children:(0,$e.jsx)(m.Ph,{autoFocus:!0,openMenuOnFocus:!0,placeholder:"Replace with",options:h.alternatives,isOpen:!0,onCloseMenu:v,onChange:e=>{if(e.value){const t=d.getOperationDef(e.value.id),o=[...t.defaultParams];for(let e=0;e<Math.min(n.params.length,o.length);e++)t.params[e].type===r.params[e].type&&(o[e]=n.params[e]);const s=Object.assign({},n,{params:o,id:e.value.id});a(i,r.changeTypeHandler?r.changeTypeHandler(s,t):s)}}})})]})}));Ue.displayName="OperationHeader";const Je=e=>({header:(0,r.css)({borderBottom:`1px solid ${e.colors.border.medium}`,padding:e.spacing(.5,.5,.5,1),display:"flex",alignItems:"center","&:hover .operation-header-show-on-hover":(0,r.css)({opacity:1})}),operationHeaderButtons:(0,r.css)({opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short})}),selectWrapper:(0,r.css)({paddingRight:e.spacing(2)})});var Xe=n(86351),Ye=n(13910),Ke=n(12310),Ge=n(63472);function et(e){return e.editor?e.editor:e.options?rt:"boolean"===e.type?nt:tt}function tt(e){var t;return(0,$e.jsx)(Ye.H,{id:(0,Ge.i1)(e.operationIndex,e.index),defaultValue:null===(t=e.value)||void 0===t?void 0:t.toString(),minWidth:e.paramDef.minWidth,placeholder:e.paramDef.placeholder,title:e.paramDef.description,onCommitChange:t=>{e.onChange(e.index,t.currentTarget.value),e.paramDef.runQueryOnEnter&&"keydown"===t.type&&e.onRunQuery()}})}function nt(e){return(0,$e.jsx)(Ke.X,{id:(0,Ge.i1)(e.operationIndex,e.index),value:e.value,onChange:t=>e.onChange(e.index,t.currentTarget.checked)})}function rt(e){var t,n;let{paramDef:r,value:o,index:i,operationIndex:a,onChange:s}=e;const d=(0,c.wW)(ot);let p=r.options;null!==(t=p[0])&&void 0!==t&&t.label||(p=r.options.map((e=>({label:e.toString(),value:e}))));let f=null!==(n=p.find((e=>e.value===o)))&&void 0!==n?n:(0,Xe.E)(o);return!o&&r.optional?(0,$e.jsx)("div",{className:d.optionalParam,children:(0,$e.jsx)(u.zx,{size:"sm",variant:"secondary",title:`Add ${r.name}`,icon:"plus",onClick:()=>s(i,p[0].value),children:r.name})}):(0,$e.jsxs)(l.Stack,{gap:.5,direction:"row",alignItems:"center",wrap:!1,children:[(0,$e.jsx)(m.Ph,{id:(0,Ge.i1)(a,i),value:f,options:p,placeholder:r.placeholder,allowCustomValue:!0,onChange:e=>s(i,e.value)}),r.optional&&(0,$e.jsx)(u.zx,{"data-testid":`operations.${i}.remove-param`,size:"sm",fill:"text",icon:"times",variant:"secondary",title:`Remove ${r.name}`,onClick:()=>s(i,"")})]})}const ot=e=>({optionalParam:(0,r.css)({marginTop:e.spacing(1)})});function it(e){let{operation:t,index:n,onRemove:a,onChange:s,onRunQuery:d,queryModeller:m,query:h,datasource:g,flash:v,highlight:y}=e;const x=(0,c.wW)(st),b=m.getOperationDef(t.id),w=function(e){const[t,n]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{let t;return e?t=setTimeout((()=>{n(!1)}),1e3):n(!0),()=>clearTimeout(t)}),[e]),t&&e}(v);if(!b)return(0,$e.jsxs)("span",{children:["Operation ",t.id," not found"]});const j=(e,r)=>{const o=Object.assign({},t,{params:[...t.params]});o.params[e]=r,at(b,o,n,e,s)},O=()=>{const e=Object.assign({},t,{params:[...t.params,""]});at(b,e,n,t.params.length,s)},k=e=>{const r=Object.assign({},t,{params:[...t.params.slice(0,e),...t.params.slice(e+1)]});at(b,r,n,e,s)},E=[];for(let e=0;e<t.params.length;e++){const r=b.params[Math.min(b.params.length-1,e)],o=et(r);E.push((0,$e.jsxs)("div",{className:x.paramRow,children:[!r.hideName&&(0,$e.jsxs)("div",{className:x.paramName,children:[(0,$e.jsx)("label",{htmlFor:(0,Ge.i1)(n,e),children:r.name}),r.description&&(0,$e.jsx)(p.u,{placement:"top",content:r.description,theme:"info",children:(0,$e.jsx)(f.J,{name:"info-circle",size:"sm",className:x.infoIcon})})]}),(0,$e.jsx)("div",{className:x.paramValue,children:(0,$e.jsxs)(l.Stack,{gap:.5,direction:"row",alignItems:"center",wrap:!1,children:[(0,$e.jsx)(o,{index:e,paramDef:r,value:t.params[e],operation:t,operationIndex:n,onChange:j,onRunQuery:d,query:h,datasource:g}),r.restParam&&(t.params.length>b.params.length||r.optional)&&(0,$e.jsx)(u.zx,{"data-testid":`operations.${n}.remove-rest-param`,size:"sm",fill:"text",icon:"times",variant:"secondary",title:`Remove ${r.name}`,onClick:()=>k(e)})]})})]},`${e}-1`))}let C;if(b.params.length>0){const e=b.params[b.params.length-1];e.restParam&&(C=function(e,t,n,r,o){return(0,$e.jsx)("div",{className:o.restParam,children:(0,$e.jsx)(u.zx,{size:"sm",icon:"plus",title:`Add ${e.name}`,variant:"secondary",onClick:t,"data-testid":`operations.${n}.add-rest-param`,children:e.name})},`${r}-2`)}(e,O,n,t.params.length,x))}return(0,$e.jsx)(i._l,{draggableId:`operation-${n}`,index:n,children:e=>(0,$e.jsxs)("div",Object.assign({className:(0,r.cx)(x.card,(w||y)&&x.cardHighlight),ref:e.innerRef},e.draggableProps,{"data-testid":`operations.${n}.wrapper`,children:[(0,$e.jsx)(Ue,{operation:t,dragHandleProps:e.dragHandleProps,def:b,index:n,onChange:s,onRemove:a,queryModeller:m}),(0,$e.jsx)("div",{className:x.body,children:E}),C,n<h.operations.length-1&&(0,$e.jsxs)("div",{className:x.arrow,children:[(0,$e.jsx)("div",{className:x.arrowLine}),(0,$e.jsx)("div",{className:x.arrowArrow})]})]}))})}function at(e,t,n,r,o){e.paramChangedHandler?o(n,e.paramChangedHandler(r,t,e)):o(n,t)}const st=e=>({card:(0,r.css)({background:e.colors.background.primary,border:`1px solid ${e.colors.border.medium}`,display:"flex",flexDirection:"column",cursor:"grab",borderRadius:e.shape.borderRadius(1),marginBottom:e.spacing(1),position:"relative",transition:"all 0.5s ease-in 0s"}),cardHighlight:(0,r.css)({boxShadow:`0px 0px 4px 0px ${e.colors.primary.border}`,border:`1px solid ${e.colors.primary.border}`}),infoIcon:(0,r.css)({marginLeft:e.spacing(.5),color:e.colors.text.secondary,":hover":{color:e.colors.text.primary}}),body:(0,r.css)({margin:e.spacing(1,1,.5,1),display:"table"}),paramRow:(0,r.css)({label:"paramRow",display:"table-row",verticalAlign:"middle"}),paramName:(0,r.css)({display:"table-cell",padding:e.spacing(0,1,0,0),fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,verticalAlign:"middle",height:"32px"}),paramValue:(0,r.css)({label:"paramValue",display:"table-cell",verticalAlign:"middle"}),restParam:(0,r.css)({padding:e.spacing(0,1,1,1)}),arrow:(0,r.css)({position:"absolute",top:"0",right:"-18px",display:"flex"}),arrowLine:(0,r.css)({height:"2px",width:"8px",backgroundColor:e.colors.border.strong,position:"relative",top:"14px"}),arrowArrow:(0,r.css)({width:0,height:0,borderTop:"5px solid transparent",borderBottom:"5px solid transparent",borderLeft:`7px solid ${e.colors.border.strong}`,position:"relative",top:"10px"})});function lt(e){let{query:t,datasource:n,queryModeller:r,onChange:p,onRunQuery:f,highlightedOp:m}=e;const h=(0,c.wW)(ct),{operations:g}=t,v=function(e){const t=(0,a.Z)(),n=(0,s.Z)(e);if(!t())return e.map((()=>!1));if(!n)return e.map((()=>!0));let r=[];if(n.length-1===e.length&&e.every((e=>n.includes(e))))return e.map((()=>!1));if(n.length+1===e.length&&n.every((t=>e.includes(t)))){const t=e.find((e=>!n.includes(e)));r=e.map((e=>e===t))}else r=e.map(((e,t)=>{var r,o,i;return o=e.id,i=null===(r=n[t])||void 0===r?void 0:r.id,!(o===i||`__${o}_by`===i||o===`__${i}_by`)}));return r}(g),[y,x]=(0,o.useState)(!1),b=(e,n)=>{const r=[...g];r.splice(e,1,n),p(Object.assign({},t,{operations:r}))},w=e=>{const n=[...g.slice(0,e),...g.slice(e+1)];p(Object.assign({},t,{operations:n}))},j=r.getCategories().map((e=>({value:e,label:e,items:r.getOperationsForCategory(e).map((e=>({value:e.id,label:e.name,isLeaf:!0})))})));return(0,$e.jsx)(l.Stack,{gap:1,direction:"column",children:(0,$e.jsxs)(l.Stack,{gap:1,children:[g.length>0&&(0,$e.jsx)(i.Z5,{onDragEnd:e=>{if(!e.destination)return;const n=[...g],r=n[e.source.index];n.splice(e.source.index,1),n.splice(e.destination.index,0,r),p(Object.assign({},t,{operations:n}))},children:(0,$e.jsx)(i.bK,{droppableId:"sortable-field-mappings",direction:"horizontal",children:e=>(0,$e.jsxs)("div",Object.assign({className:h.operationList,ref:e.innerRef},e.droppableProps,{children:[g.map(((e,o)=>(0,$e.jsx)(it,{queryModeller:r,index:o,operation:e,query:t,datasource:n,onChange:b,onRemove:w,onRunQuery:f,flash:v[o],highlight:m===e},e.id+JSON.stringify(e.params)+o))),e.placeholder]}))})}),(0,$e.jsx)("div",{className:h.addButton,children:y?(0,$e.jsx)(d.v,{options:j,onSelect:e=>{const n=r.getOperationDef(e);n&&(p(n.addOperationHandler(n,t,r)),x(!1))},onBlur:()=>{x(!1)},autoFocus:!0,alwaysOpen:!0,hideActiveLevelLabel:!0,placeholder:"Search"}):(0,$e.jsx)(u.zx,{icon:"plus",variant:"secondary",onClick:()=>x(!0),title:"Add operation",children:"Operations"})})]})})}const ct=e=>({heading:(0,r.css)({label:"heading",fontSize:12,fontWeight:e.typography.fontWeightMedium,marginBottom:0}),operationList:(0,r.css)({label:"operationList",display:"flex",flexWrap:"wrap",gap:e.spacing(2)}),addButton:(0,r.css)({label:"addButton",width:126,paddingBottom:e.spacing(1)})})},62287:(e,t,n)=>{n.d(t,{V:()=>a});n(68404);var r=n(7035),o=n(20038),i=n(45916);function a(e){let{query:t,queryModeller:n,stepNumber:a,lang:s,onMouseEnter:l,onMouseLeave:c}=e;return(0,i.jsx)(i.Fragment,{children:t.operations.map(((e,t)=>{var d;const u=n.getOperationDef(e.id);if(!u)return`Operation ${e.id} not found`;const p=u.renderer(e,u,"<expr>"),f=u.explainHandler?u.explainHandler(e,u):null!==(d=u.documentation)&&void 0!==d?d:"no docs";return(0,i.jsx)("div",{onMouseEnter:()=>null==l?void 0:l(e,t),onMouseLeave:()=>null==c?void 0:c(e,t),children:(0,i.jsx)(r.B,{stepNumber:t+a,title:(0,i.jsx)(o.U,{query:p,lang:s}),markdown:f})},t)}))})}},1865:(e,t,n)=>{n.d(t,{B:()=>s});var r=n(52423),o=(n(68404),n(68522)),i=n(16755),a=n(45916);function s(e){let{children:t}=e;const n=(0,i.wW)(l);return(0,a.jsx)("div",{className:n.root,children:(0,a.jsx)(o.Stack,{gap:1,children:t})})}const l=e=>({root:(0,r.css)({padding:e.spacing(1,1,0,1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.borderRadius(1)})})},21787:(e,t,n)=>{n.d(t,{L:()=>c});var r=n(52423),o=n(68404),i=n(16755),a=n(21888),s=n(8006),l=n(45916);const c=e=>{let{datasource:t,query:n,onChange:r,data:c,queryModeller:u,buildVisualQueryFromString:p}=e;const[f,m]=(0,o.useState)([]),h=(0,i.wW)(d);return(0,o.useEffect)((()=>{const e={expr:u.renderQuery(n),refId:""},r=t.getQueryHints(e,(null==c?void 0:c.series)||[]).filter((e=>{var t;return null===(t=e.fix)||void 0===t?void 0:t.action}));m(r)}),[t,n,c,u]),(0,l.jsx)(l.Fragment,{children:f.length>0&&(0,l.jsx)("div",{className:h.container,children:f.map((e=>{var o,i,c;return(0,l.jsx)(a.u,{content:`${e.label} ${null===(o=e.fix)||void 0===o?void 0:o.label}`,children:(0,l.jsx)(s.zx,{onClick:()=>{var o;if(null!=e&&null!==(o=e.fix)&&void 0!==o&&o.action){const o={expr:u.renderQuery(n),refId:""},i=t.modifyQuery(o,e.fix.action),a=p(i.expr);return r(a.query)}},fill:"outline",size:"sm",className:h.hint,children:"hint: "+(null===(i=e.fix)||void 0===i||null===(c=i.action)||void 0===c?void 0:c.type.toLowerCase().replace("_"," "))+"()"})},e.type)}))})})};c.displayName="QueryBuilderHints";const d=e=>({container:r.css`
      display: flex;
      align-items: start;
    `,hint:r.css`
      margin-right: ${e.spacing(1)};
    `})},85477:(e,t,n)=>{n.d(t,{k:()=>s});n(68404);var r=n(37625),o=n(28933),i=n(45916);const a=[{label:"Builder",value:o.c.Builder},{label:"Code",value:o.c.Code}];function s(e){let{mode:t,onChange:n}=e;return(0,i.jsx)("div",{"data-testid":"QueryEditorModeToggle",children:(0,i.jsx)(r.S,{options:a,size:"sm",value:t,onChange:n})})}},41303:(e,t,n)=>{n.d(t,{n:()=>u});var r=n(52423),o=n(82897),i=n(68404),a=n(68522),s=n(16755),l=n(70800),c=n(45916);const d=["label"];function u(e){let{label:t}=e,n=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,d);const r=t.replace(" ","-"),u=(0,i.useRef)((0,o.uniqueId)(`switch-${r}`)),f=(0,s.wW)(p);return(0,c.jsxs)(a.Stack,{gap:1,children:[(0,c.jsx)("label",{htmlFor:u.current,className:f.switchLabel,children:t}),(0,c.jsx)(l.r,Object.assign({},n,{id:u.current}))]})}const p=e=>({switchLabel:(0,r.css)({color:e.colors.text.secondary,cursor:"pointer",fontSize:e.typography.bodySmall.fontSize,"&:hover":{color:e.colors.text.primary}})})},47992:(e,t,n)=>{n.d(t,{d:()=>c});var r=n(52423),o=(n(68404),n(88102)),i=n(68522),a=n(16755),s=n(99500),l=n(45916);function c(e){let{title:t,children:n,collapsedInfo:r}=e;const[c,u]=(0,o.Z)(!1),p=(0,a.wW)(d);return(0,l.jsxs)(i.Stack,{gap:0,direction:"column",children:[(0,l.jsxs)("div",{className:p.header,onClick:u,title:"Click to edit options",children:[(0,l.jsx)("div",{className:p.toggle,children:(0,l.jsx)(s.J,{name:c?"angle-down":"angle-right"})}),(0,l.jsx)("h6",{className:p.title,children:t}),!c&&(0,l.jsx)("div",{className:p.description,children:r.map(((e,t)=>(0,l.jsx)("span",{children:e},t)))})]}),c&&(0,l.jsx)("div",{className:p.body,children:n})]})}const d=e=>({switchLabel:(0,r.css)({color:e.colors.text.secondary,cursor:"pointer",fontSize:e.typography.bodySmall.fontSize,"&:hover":{color:e.colors.text.primary}}),header:(0,r.css)({display:"flex",cursor:"pointer",alignItems:"baseline",color:e.colors.text.primary,"&:hover":{background:e.colors.emphasize(e.colors.background.primary,.03)}}),title:(0,r.css)({flexGrow:1,overflow:"hidden",fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,margin:0}),description:(0,r.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,paddingLeft:e.spacing(2),gap:e.spacing(2),display:"flex"}),body:(0,r.css)({display:"flex",paddingTop:e.spacing(2),gap:e.spacing(2),flexWrap:"wrap"}),toggle:(0,r.css)({color:e.colors.text.secondary,marginRight:`${e.spacing(1)}`})})},20038:(e,t,n)=>{n.d(t,{U:()=>l});var r=n(52423),o=n(57706),i=n.n(o),a=(n(68404),n(16755)),s=n(45916);function l(e){let{query:t,lang:n,className:o}=e;const l=(0,a.l4)(),d=c(l),u=i().highlight(t,n.grammar,n.name);return(0,s.jsx)("div",{className:(0,r.cx)(d.editorField,"prism-syntax-highlight",o),"aria-label":"selector",dangerouslySetInnerHTML:{__html:u}})}const c=e=>({editorField:(0,r.css)({fontFamily:e.typography.fontFamilyMonospace,fontSize:e.typography.bodySmall.fontSize})})},47322:(e,t,n)=>{n.d(t,{J$:()=>l,P5:()=>u,ar:()=>i,iS:()=>s,jl:()=>a});var r=n(68404),o=n(78130);const i="PrometheusQueryEditorExplainDefault",a="PrometheusQueryEditorRawQueryDefault",s="LokiQueryEditorExplainDefault",l="LokiQueryEditorRawQueryDefault";function c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=o.Z.get(e);return void 0===n?t:Boolean(parseInt(n,10))}function d(e,t){o.Z.set(e,t?"1":"0")}function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,o]=(0,r.useState)(c(e,t)),i=(0,r.useCallback)((t=>{d(e,t),o(t)}),[e]);return{flag:n,setFlag:i}}},28933:(e,t,n)=>{let r;n.d(t,{c:()=>r}),function(e){e.Code="code",e.Builder="builder"}(r||(r={}))}}]);
//# sourceMappingURL=9283.5b1dcc338d4774ac71eb.js.map